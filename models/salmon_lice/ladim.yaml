# Configuration file for salmon lice model using ROMS output

time_control:
    # Start and stop of simulation
    start_time     : 2015-04-01 00:00:00
    stop_time      : 2015-04-01 12:00:00
    reference_time : 2015-01-01

files:
    particle_release_file : salmon_lice.rls
    output_file           : out.nc

gridforce:
    module: ladim.gridforce.ROMS
    input_file: /scratch/Data/NK800/file_????.nc
    subgrid: [200, 750, 300, 900]
    ibm_forcing: [temp, salt]

# Samle IBM-variablene her
ibm:
    # IBM-module, omit or '' for no IBM
    module: ladim.ibms.ibm_salmon_lice
    variables: [super, age]

particle_release:
    # release_type, discrete or continuous
    release_type: continuous
    release_frequency: [1, h]   # Hourly release
    variables: [mult, release_time, X, Y, Z, farmid, super]
    # Converters (if not float)
    mult: int
    release_time: time   # np.datetime64[s]
    farmid: int
    particle_variables: [release_time, farmid]

output_variables:
    outper: [1, h]    # Output every hour
    # Variable names
    particle: [release_time, farmid]
    instance: [pid, X, Y, Z, super, age]
    # NetCDF arguments
    release_time:
        ncformat: f8
        long_name: particle release time
        # Reference_time becomes substituted with value set above
        units: seconds since reference_time
    farmid: {ncformat: i4, long_name: fish farm location number}
    pid: {ncformat: i4, long_name: particle identifier}
    X: {ncformat: f4, long_name: particle X-coordinate}
    Y: {ncformat: f4, long_name: particle Y-coordinate}
    Z:
        ncformat: f4
        long_name: particle depth
        standard_name: depth_below_surface
        units: m
        positive: down
    age:
        ncformat: f4
        long_name: particle age in degree-days
        units: Celcius days
        standard_name: integral_of_sea_water_temperature_wrt_time
    super: {ncformat: f4, long_name: number of individuals in instance}

numerics:
    # Model time step
    dt: [600, s]     # Format = [value, unit]
    # Advection method, EF, RK2, or RK4
    advection: RK2   # Second order Runge Kutta
    # Horizontal diffusion coefficient
    diffusion: 10    # [m/s**2]
